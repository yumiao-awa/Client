<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"/>
  <title>å°è¯´é€‰æ‹©</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* ğŸŒŸ å…³é”®ä¿®å¤ï¼šä½¿ç”¨ dvh + safe-area */
    html, body {
      height: 100%;
      overflow: hidden;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
      background: #f0f8ff;
      color: #333;
      /* ç§»é™¤ flexï¼Œæ”¹ç”¨ #app æ§åˆ¶ */
    }

    /* ğŸ¯ æ ¸å¿ƒï¼šå®‰å…¨å±…ä¸­å®¹å™¨ */
    #app {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100dvh; /* âœ… åŠ¨æ€è§†å£é«˜åº¦ï¼Œæ’é™¤æµè§ˆå™¨ UI */
      padding: 
        env(safe-area-inset-top) 
        env(safe-area-inset-right) 
        env(safe-area-inset-bottom) 
        env(safe-area-inset-left);
      /* ä¿è¯åœ¨åˆ˜æµ·å±/æ¨ªæ¡è®¾å¤‡ä¸Šä¸è¢«é®æŒ¡ */
    }

    .scale-container {
      flex: 0 0 auto; /* ä¸ä¼¸ç¼©ï¼Œé  #app å±…ä¸­ */
      display: flex;
      align-items: center;
      justify-content: center;
      transform-origin: center;
    }

    .carousel {
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      width: 800px;
      height: 500px;
    }

    /* å¡ç‰‡æ ·å¼ï¼ˆåŒå‰ï¼Œä¿æŒä¸å˜ï¼‰ */
    .card {
      width: 268px;
      height: 400px;
      background: #fff;
      border-radius: 22px;
      box-shadow: 0 8px 24px rgba(0, 60, 120, 0.09);
      position: relative;
      cursor: pointer;
      pointer-events: none;
      overflow: hidden;
      transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
    }

    .card-content {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      padding: 32px 28px;
      pointer-events: auto;
    }

    .card-title {
      font-size: 24px;
      font-weight: bold;
      color: #2c5aa0;
      text-align: center;
      line-height: 1.3;
    }

    .card-desc {
      font-size: 16px;
      color: #5a5a5a;
      text-align: center;
      line-height: 1.6;
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .select-btn {
      padding: 12px 40px;
      background: linear-gradient(135deg, #6a99d6, #4a7bc2);
      color: #fff;
      border: none;
      border-radius: 50px;
      font-weight: bold;
      font-size: 17px;
      cursor: pointer;
      transition: all 0.25s;
      box-shadow: 0 4px 12px rgba(74, 123, 194, 0.35);
      pointer-events: auto;
      margin: 0;
    }

    .select-btn:hover {
      transform: scale(1.04);
      box-shadow: 0 6px 16px rgba(74, 123, 194, 0.45);
    }

    .card.center {
      transform: scale(1);
      z-index: 20;
      opacity: 1;
    }

    .card.center::before {
      content: "";
      position: absolute;
      top: -36px; left: 50%;
      transform: translateX(-50%);
      width: 220px;
      height: 36px;
      background: radial-gradient(circle, rgba(106, 155, 214, 0.38), transparent 70%);
      filter: blur(14px);
      z-index: -1;
    }

    .card.left,
    .card.right {
      transform: scale(0.92);
      opacity: 0.65;
      z-index: 5;
    }

    .card.left {
      margin-right: -52px;
      clip-path: inset(0 0 0 75%);
    }

    .card.right {
      margin-left: -52px;
      clip-path: inset(0 75% 0 0);
    }

    .card:not(.center) .select-btn {
      display: none;
    }

    .hint {
      text-align: center;
      font-size: 14px;
      color: #8899aa;
      margin-top: 12px;
    }

    /* å°å±å¾®è°ƒ */
    @media (max-height: 600px) {
      .hint { margin-top: 6px; font-size: 13px; }
    }
  </style>
</head>
<body>
  <!-- ğŸŒŸ æ–°å¢ #app å±‚ï¼Œä¸“æ³¨å±…ä¸­ -->
  <div id="app">
    <div class="scale-container" id="scaleContainer">
      <div class="carousel">
        <div class="card left"><div class="card-content"></div></div>
        <div class="card center"><div class="card-content"></div></div>
        <div class="card right"><div class="card-content"></div></div>
      </div>
    </div>
    <div class="hint">ç‚¹å‡»å·¦å³å¡ç‰‡åˆ‡æ¢ Â· ç‚¹å‡»ã€Œé€‰æ‹©ã€å¼€å§‹é˜…è¯»</div>
  </div>

  <script>
    const NOVELS = [
      { title: "é±¼å–µå¾€äº‹", desc: "åœ¨æµ®ç©ºåŸäº‘é²¸ä¹‹ä¸Šï¼Œä¸€åªå¤±å¿†æœºæ¢°çŒ«è†å¬æ˜Ÿè¾°ä½è¯­ï¼Œæ‰“ææ²‰æ²¡äºæ•°æ®æµ·çš„å¾€äº‹ã€‚", file: "reader.html?book=1" },
      { title: "é™è¯­æ‰‹è®°", desc: "è€ƒå¤å­¦å®¶åœ¨åºŸå¼ƒç©ºé—´ç«™å‘ç°ä¸€å°ä»åœ¨è¿è¡Œçš„çŒ«å½¢ç»ˆç«¯ï¼Œå®ƒå®ˆæŠ¤ç€ä¸€æ®µè¢«åˆ é™¤çš„æ–‡æ˜åè®®ã€‚", file: "reader.html?book=2" },
      { title: "æ³‰å¿ƒä½è¯­", desc: "æ·±æµ·åŸé‚¦ä¸­ï¼Œå…±ç”Ÿä½“çŒ«æ—é€šè¿‡å…±æŒ¯æ³¢ä¼ é€’è®°å¿†ã€‚ä¸€åªâ€˜å“‘çŒ«â€™å´æ¥æ”¶åˆ°äº†æ¥è‡ªåœ°æ ¸çš„å¼‚å¸¸ä¿¡å·ã€‚", file: "reader.html?book=3" },
      { title: "æ˜Ÿå°˜å›å“", desc: "æµæµªèˆ°é˜Ÿçš„æœ€åä¸€è‰˜èˆ¹ä¸Šï¼Œä»…å­˜çš„AIä»¥çŒ«çš„å½¢æ€é™ªä¼´äººç±»å­©ç«¥ã€‚å®ƒå¼€å§‹æ¢¦è§ä¸å±äºè‡ªå·±çš„è¿‡å»ã€‚", file: "reader.html?book=4" }
    ];

    let currentIndex = 0;
    const getContent = cls => document.querySelector(`.card.${cls} .card-content`);
    const scaleContainer = document.getElementById('scaleContainer');

    function updateScale() {
      const baseWidth = 390;
      const scale = Math.min(window.innerWidth / baseWidth, 1.2);
      scaleContainer.style.transform = `scale(${scale})`;
    }

    function render(el, novel) {
      el.innerHTML = `
        <div class="card-title">${novel.title}</div>
        <div class="card-desc">${novel.desc}</div>
        <button class="select-btn">é€‰æ‹©</button>
      `;
    }

    function updateCards() {
      const n = NOVELS.length;
      [getContent('left'), getContent('center'), getContent('right')].forEach((el, i) => {
        const idx = (currentIndex + i - 1 + n) % n;
        render(el, NOVELS[idx]);
      });

      getContent('left').onclick = () => goTo((currentIndex - 1 + n) % n);
      getContent('right').onclick = () => goTo((currentIndex + 1) % n);
      getContent('center').querySelector('.select-btn').onclick = e => {
        e.stopPropagation();
        location.href = NOVELS[currentIndex].file;
      };
    }

    function goTo(idx) {
      currentIndex = idx;
      document.querySelectorAll('.card').forEach(c => {
        c.style.opacity = '0';
        c.style.transform = 'scale(0.9)';
      });
      setTimeout(() => {
        updateCards();
        document.querySelectorAll('.card').forEach(c => {
          c.style.transition = 'all 0.5s cubic-bezier(0.16, 1, 0.3, 1)';
          c.style.opacity = c.classList.contains('center') ? '1' : '0.65';
          c.style.transform = c.classList.contains('center') ? 'scale(1)' : 'scale(0.92)';
        });
      }, 200);
    }

    document.addEventListener('DOMContentLoaded', () => {
      updateScale();
      updateCards();
      window.addEventListener('resize', updateScale);
    });

    document.addEventListener('keydown', e => {
      if (e.key === 'ArrowLeft') goTo((currentIndex - 1 + NOVELS.length) % NOVELS.length);
      else if (e.key === 'ArrowRight') goTo((currentIndex + 1) % NOVELS.length);
    });
  </script>
</body>
</html>
